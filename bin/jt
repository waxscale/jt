#!/usr/bin/env bash
#
# jt: top\u2010level coordinator
#

if [ $# -lt 1 ]; then
  echo "Usage: jt {add|ls|rm|rename|nav|box|append|tags} [args...]" >&2
  exit 1
fi

SCRIPT_DIR="$(dirname "$0")"
COMMAND="$1"
shift

case "$COMMAND" in
  add)
    exec python3 "$SCRIPT_DIR/../src/jt-add.py" "$@"
    ;;
  ls)
    exec python3 "$SCRIPT_DIR/../src/jt-ls.py" "$@"
    ;;
  rm)
    exec python3 "$SCRIPT_DIR/../src/jt-rm.py" "$@"
    ;;
  rename)
    exec python3 "$SCRIPT_DIR/../src/jt-rename.py" "$@"
    ;;
  nav)
    exec python3 "$SCRIPT_DIR/../src/jt-nav.py" "$@"
    ;;
  box)
    exec python3 "$SCRIPT_DIR/../src/jt-box.py"
    ;;
  append)
    exec python3 "$SCRIPT_DIR/../src/jt-append.py"
    ;;
    tags)
      if [ $# -lt 1 ]; then
        echo "Usage: jt tags {add|rm|list|rename|mv|cd} [args...]" >&2
        exit 1
      fi
      TAG_SUB="$1"
      shift
      case "$TAG_SUB" in
      add)
        exec python3 "$SCRIPT_DIR/../src/jt-tags-add.py" "$@"
        ;;
      rm)
        exec python3 "$SCRIPT_DIR/../src/jt-tags-rm.py" "$@"
        ;;
      list)
        exec python3 "$SCRIPT_DIR/../src/jt-tags-list.py" "$@"
        ;;
      rename)
        exec python3 "$SCRIPT_DIR/../src/jt-tags-rename.py" "$@"
        ;;
        mv)
          exec python3 "$SCRIPT_DIR/../src/jt-tags-mv.py" "$@"
          ;;
        cd)
          exec python3 "$SCRIPT_DIR/../src/jt-tags-cd.py" "$@"
          ;;
        *)
          echo "Unknown jt tags command: $TAG_SUB. Use one of: add, rm, list, rename, mv, cd." >&2
          exit 1
          ;;
      esac
    ;;
  *)
    echo "Unknown command: $COMMAND. Use one of: add, ls, rm, rename, nav, box, append, tags." >&2
    exit 1
    ;;
esac

